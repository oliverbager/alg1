\newcounter{theo}[subsection]\setcounter{theo}{0}
\renewcommand{\thetheo}{\arabic{section}.\arabic{subsection}.\arabic{theo}}
\newenvironment{theo}[1][]{
    \refstepcounter{theo}
      \ifstrempty{#1}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=blue!20]
            {\strut Theorem~\thetheo};}}}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=blue!20]
            {\strut Theorem~\thetheo:~#1};}}}
        \mdfsetup{
          innertopmargin=2pt,linecolor=blue!20,
          linewidth=2pt,topline=true,
          frametitleaboveskip=\dimexpr-\ht\strutbox\relax
        }
\vskip 12pt \begin{mdframed}[]\relax}{
\vskip 12pt\end{mdframed}}

\newcounter{exmp}[subsection]\setcounter{exmp}{0}
\renewcommand{\theexmp}{\arabic{section}.\arabic{subsection}.\arabic{exmp}}
\newenvironment{exmp}{
    \stepcounter{exmp}
    \mdfsetup{
        linecolor=black, linewidth=1pt,
        leftline=false, rightline=false,
        innerleftmargin=0pt, innerrightmargin=0pt,}
\vskip 12pt\begin{mdframed}\relax\textbf{Example \theexmp~~}}{
\vskip 12pt\end{mdframed}}

\newenvironment{prf}{
    \stepcounter{prf}
    \mdfsetup{
        leftline=false, rightline=false,
        topline=false, bottomline=false,
        innerleftmargin=0pt, innerrightmargin=0pt,}
\vskip 0pt\begin{mdframed}\relax\textit{Proof.~}}{
\hfill\qed\vskip 12pt\end{mdframed}}

\newcounter{prop}[subsection]\setcounter{prop}{0}
\renewcommand{\theprop}{\arabic{section}.\arabic{subsection}.\arabic{prop}}
\newenvironment{prop}[1][]{
    \stepcounter{prop}
      \ifstrempty{#1}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=orange!20]
            {\strut Proposition~\theprop};}}}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=orange!20]
            {\strut Proposition~\theprop:~#1};}}}
        \mdfsetup{
          innertopmargin=2pt,linecolor=orange!20,
          linewidth=2pt,topline=true,
          frametitleaboveskip=\dimexpr-\ht\strutbox\relax
        }
\vskip 12pt \begin{mdframed}[]\relax}{
\vskip 12pt\end{mdframed}}

\newcounter{lemm}[subsection]\setcounter{lemm}{0}
\renewcommand{\thelemm}{\arabic{section}.\arabic{subsection}.\arabic{lemm}}
\newenvironment{lemm}[1][]{
    \refstepcounter{lemm}
      \ifstrempty{#1}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=cyan!20]
            {\strut Lemma~\thelemm};}}}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=cyan!20]
            {\strut Lemma~\thelemm:~#1};}}}
        \mdfsetup{
          innertopmargin=2pt,linecolor=cyan!20,
          linewidth=2pt,topline=true,
          frametitleaboveskip=\dimexpr-\ht\strutbox\relax
        }
\vskip 12pt \begin{mdframed}[]\relax}{
\vskip 12pt\end{mdframed}}

\newcounter{coro}[subsection]\setcounter{theo}{0}
\renewcommand{\thecoro}{\arabic{section}.\arabic{subsection}.\arabic{coro}}
\newenvironment{coro}[1][]{
    \refstepcounter{coro}
      \ifstrempty{#1}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=gray!20]
            {\strut Corollary~\thecoro};}}}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=gray!20]
            {\strut Corollary~\thecoro:~#1};}}}
        \mdfsetup{
          innertopmargin=2pt,linecolor=gray!20,
          linewidth=2pt,topline=true,
          frametitleaboveskip=\dimexpr-\ht\strutbox\relax
        }
\vskip 12pt \begin{mdframed}[]\relax}{
\vskip 12pt\end{mdframed}}

\newcounter{defi}[subsection]\setcounter{defi}{0}
\renewcommand{\thedefi}{\arabic{section}.\arabic{subsection}.\arabic{defi}}
\newenvironment{defi}[1][]{
  \refstepcounter{defi}
    \ifstrempty{#1}
      {\mdfsetup{
        frametitle={
          \tikz[baseline=(current bounding box.east),outer sep=0pt]
          \node[anchor=east,rectangle,fill=green!20]
          {\strut Definition~\thedefi};}}}
      {\mdfsetup{
        frametitle={
          \tikz[baseline=(current bounding box.east),outer sep=0pt]
          \node[anchor=east,rectangle,fill=green!20]
          {\strut Definition~\thedefi:~#1};}}}
      \mdfsetup{innertopmargin=2pt,linecolor=green!20,
                linewidth=2pt,topline=true,
                frametitleaboveskip=\dimexpr-\ht\strutbox\relax
      }
\vskip 12pt\begin{mdframed}[]\relax
\label{#2}}{\vskip 12pt\end{mdframed}}


