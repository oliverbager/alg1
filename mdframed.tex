\newcounter{theo}[section]\setcounter{theo}{0}
\renewcommand{\thetheo}{\arabic{section}.\arabic{theo}}
\newenvironment{theo}[1][]{
    \refstepcounter{theo}
      \ifstrempty{#1}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=blue!20]
            {\strut Theorem~\thetheo};}}}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=blue!20]
            {\strut Theorem~\thetheo:~#1};}}}
        \mdfsetup{
          innertopmargin=2pt,linecolor=blue!20,
          linewidth=2pt,topline=true,
          frametitleaboveskip=\dimexpr-\ht\strutbox\relax
        }
\vskip 12pt \begin{mdframed}[]\relax}{
\vskip 12pt\end{mdframed}}

\newcounter{prop}[section]\setcounter{prop}{0}
\renewcommand{\theprop}{\arabic{section}.\arabic{prop}}
\newenvironment{prop}[1][]{
    \refstepcounter{prop}
      \ifstrempty{#1}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=orange!20]
            {\strut Proposition~\theprop};}}}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=orange!20]
            {\strut Proposition~\theprop:~#1};}}}
        \mdfsetup{
          innertopmargin=2pt,linecolor=orange!20,
          linewidth=2pt,topline=true,
          frametitleaboveskip=\dimexpr-\ht\strutbox\relax
        }
\vskip 12pt \begin{mdframed}[]\relax}{
\vskip 12pt\end{mdframed}}

\newcounter{coro}[section]\setcounter{theo}{0}
\renewcommand{\thecoro}{\arabic{section}.\arabic{coro}}
\newenvironment{coro}[1][]{
    \refstepcounter{coro}
      \ifstrempty{#1}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=gray!20]
            {\strut Corollary~\thecoro};}}}
        {\mdfsetup{
          frametitle={
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=gray!20]
            {\strut Corollary~\thecoro:~#1};}}}
        \mdfsetup{
          innertopmargin=2pt,linecolor=gray!20,
          linewidth=2pt,topline=true,
          frametitleaboveskip=\dimexpr-\ht\strutbox\relax
        }
\vskip 12pt \begin{mdframed}[]\relax}{
\vskip 12pt\end{mdframed}}

\newenvironment{prf}[1][]{
  \refstepcounter{prf}
    \ifstrempty{#1}
      {\mdfsetup{
        frametitle={
          \tikz[baseline=(current bounding box.east),outer sep=0pt]
          \node[anchor=east,rectangle,fill=red!20]
          {\strut Proof~\theprf};}}}
      {\mdfsetup{
        frametitle={
          \tikz[baseline=(current bounding box.east),outer sep=0pt]
          \node[anchor=east,rectangle,fill=red!20]
          {\strut Proof~\theprf:~#1};}}}
      \mdfsetup{innertopmargin=2pt,linecolor=red!20,
                linewidth=2pt,topline=true,
                frametitleaboveskip=\dimexpr-\ht\strutbox\relax
      }
\vskip 12pt\begin{mdframed}[]\relax
\label{#2}}{\qed\vskip 12pt\end{mdframed}}

\newcounter{defi}[section]\setcounter{defi}{0}
\renewcommand{\thedefi}{\arabic{section}.\arabic{defi}}
\newenvironment{defi}[1][]{
  \refstepcounter{defi}
    \ifstrempty{#1}
      {\mdfsetup{
        frametitle={
          \tikz[baseline=(current bounding box.east),outer sep=0pt]
          \node[anchor=east,rectangle,fill=green!20]
          {\strut Definition~\thedefi};}}}
      {\mdfsetup{
        frametitle={
          \tikz[baseline=(current bounding box.east),outer sep=0pt]
          \node[anchor=east,rectangle,fill=green!20]
          {\strut Definition~\thedefi:~#1};}}}
      \mdfsetup{innertopmargin=2pt,linecolor=green!20,
                linewidth=2pt,topline=true,
                frametitleaboveskip=\dimexpr-\ht\strutbox\relax
      }
\vskip 12pt\begin{mdframed}[]\relax
\label{#2}}{\vskip 12pt\end{mdframed}}
